{"version":3,"sources":["webpack:///./js/setting/index.js","webpack:///./js/api/moviesApi.js","webpack:///./js/utils/posterPath.js","webpack:///./js/utils/movieListsAdapter.js","webpack:///./index.js","webpack:///./templates/movieCard.hbs"],"names":["options","API_KEY","BASE_URL","IMG_URL","FilmotekaApiService","_params","this","searchQuery","page","totalPages","fetchResults","urlPopular","fetch","response","json","moviesLists","fetchSearch","urlSearch","incrementPage","console","log","currentPage","decrementPage","resetPage","newQuery","movieAdapter","imageName","original_title","release_date","poster_path","vote_average","imgSrc","title","rating","releaseDate","filmotekaApiService","filmListRef","document","querySelector","renderMovieList","object","results","map","item","movieCardTmp","appendMovieListMarkup","event","preventDefault","clearMovieListContainer","query","target","value","alert","moviesList","insertAdjacentHTML","join","innerHTML","addEventListener","debounce","PopularMovie","Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call"],"mappings":"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","file":"main.4f2b1edefd918cb2e46f.js","sourcesContent":["const options = {\r\n    API_KEY: 'ed4770d472da6341d2e53ccb9e288320',\r\n    BASE_URL: 'https://api.themoviedb.org/3/',\r\n    IMG_URL: 'https://image.tmdb.org/t/p/w500/'\r\n}\r\nexport default options;","import options from '../setting';\r\nconst { API_KEY, BASE_URL } = options;\r\n\r\nexport default class FilmotekaApiService {\r\n  constructor(_params) {\r\n    this.searchQuery = '';\r\n    this.page = 1;\r\n    this.totalPages = 500;\r\n  }\r\n  async fetchResults() {\r\n    const urlPopular = `${BASE_URL}movie/popular/?api_key=${API_KEY}&page=${this.page}`;\r\n    const response = await fetch(urlPopular);\r\n    const moviesLists = await response.json();\r\n    return moviesLists;\r\n  }\r\n  async fetchSearch() {\r\n    const urlSearch = `${BASE_URL}search/movie/?api_key=${API_KEY}&page=${this.page}&query=${this.searchQuery}`;\r\n    const response = await fetch(urlSearch);\r\n    const moviesLists = await response.json();\r\n    return moviesLists;\r\n  }\r\n  incrementPage() {\r\n    console.log(this.page);\r\n    if (this.currentPage === this.totalPages) {\r\n      return;\r\n    }\r\n    this.page += 1;\r\n  }\r\n  decrementPage() {\r\n    if (this.page === 1) {\r\n      return;\r\n    }\r\n    this.page -= 1;\r\n    \r\n  }\r\n  resetPage() {\r\n    this.page = 1;\r\n  }\r\n  get query() {\r\n    return this.searchQuery;\r\n  }\r\n  set query(newQuery) {\r\n    this.searchQuery = newQuery;\r\n  }\r\n}\r\n","import options from '../setting';\r\nconst { IMG_URL } = options;\r\n\r\nexport const getPosterPath = imageName => `${IMG_URL}${imageName}`;\r\n","import { getPosterPath } from './posterPath';\r\n\r\nconst movieAdapter = ({\r\n  original_title,\r\n  release_date,\r\n  poster_path,\r\n  vote_average,\r\n  // genre_ids,\r\n}) => ({\r\n  imgSrc: getPosterPath(poster_path),\r\n  title: original_title,\r\n  rating: vote_average,\r\n  releaseDate: release_date,\r\n  // genre: genre_ids,\r\n});\r\nexport default movieAdapter;\r\n","import './sass/main.scss';\r\nimport movieCardTmp from './templates/movieCard.hbs';\r\nimport FilmotekaApiService from './js/api/moviesApi';\r\nimport movieAdapter from './js/utils/movieListsAdapter';\r\nimport debounce from 'lodash.debounce';\r\n\r\nconst filmotekaApiService = new FilmotekaApiService();\r\nconst filmListRef = document.querySelector('.films-list');\r\n// const loadMoreBtn = document.querySelector('[data-action=\"load-more\"]');\r\n// const loadNextBtn = document.querySelector('[data-action=\"load-next\"]');\r\n// const loadPrevBtn = document.querySelector('[data-action=\"load-prev\"]');\r\nconst inputRefValue = document.querySelector('#js-input');\r\n\r\ninputRefValue.addEventListener('input', debounce(moviesSearch, 500));\r\n// loadMoreBtn.addEventListener('click', onLoadMore);\r\n// loadNextBtn.addEventListener('click', onLoadNext);\r\n// loadPrevBtn.addEventListener('click', onLoadPrev);\r\n\r\nasync function PopularMovie() {\r\n  try {\r\n    const moviesList = await filmotekaApiService.fetchResults();\r\n    renderMovieList(moviesList);\r\n  } catch (error) {\r\n    console.log('Ошибка! (PopularMovie)');\r\n  }\r\n}\r\n\r\nasync function renderMovieList(object) {\r\n  try {\r\n    const { results } = object;\r\n    const movieList = await results.map(item =>\r\n      movieCardTmp(movieAdapter(item)),\r\n    );\r\n    appendMovieListMarkup(movieList);\r\n  } catch (error) {\r\n    console.log('Ошибка! (renderMovieList)');\r\n  }\r\n}\r\n\r\nPopularMovie();\r\n\r\nasync function moviesSearch(event) {\r\n  try {\r\n    event.preventDefault();\r\n    clearMovieListContainer();\r\n\r\n    filmotekaApiService.query = event.target.value;\r\n\r\n    if (filmotekaApiService.query === '') {\r\n      return;\r\n    }\r\n    if (filmotekaApiService.query === ' ') {\r\n      return alert('Вы ничего не ввели');\r\n    }\r\n    filmotekaApiService.resetPage();\r\n    const moviesList = await filmotekaApiService.fetchSearch();\r\n    return renderMovieList(moviesList);\r\n  } catch (error) {\r\n    console.log('Ошибка! (moviesSearch)');\r\n  }\r\n}\r\n\r\n// async function onLoadMore() {\r\n//   try {\r\n//     filmotekaApiService.incrementPage();\r\n//     if (!inputRefValue.value) {\r\n//       return PopularMovie();\r\n//     }\r\n//     const searchList = await filmotekaApiService.fetchSearch();\r\n//     return renderMovieList(searchList);\r\n//   } catch (error) {\r\n//     console.log('Ошибка! (onLoadMore)');\r\n//   }\r\n// }\r\n// function onLoadNext() {\r\n//   filmotekaApiService.incrementPage();\r\n//   clearMovieListContainer();\r\n//   PopularMovie();\r\n// }\r\n// async function onLoadPrev() {\r\n//   filmotekaApiService.decrementPage();\r\n//   clearMovieListContainer();\r\n//   PopularMovie();\r\n// }\r\n\r\nfunction appendMovieListMarkup(results) {\r\n  filmListRef.insertAdjacentHTML('beforeend', results.join(''));\r\n}\r\n\r\nfunction clearMovieListContainer() {\r\n  filmListRef.innerHTML = '';\r\n}\r\n\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"films-list__item\\\">\\r\\n    <a class=\\\"films-list__link link\\\" href=\\\"#\\\">\\r\\n        <div class=\\\"films-list__img-box\\\">\\r\\n            <img src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"imgSrc\") || (depth0 != null ? lookupProperty(depth0,\"imgSrc\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"imgSrc\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":22},\"end\":{\"line\":4,\"column\":32}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":39},\"end\":{\"line\":4,\"column\":48}}}) : helper)))\n    + \" poster\\\" />\\r\\n        </div>\\r\\n        <div class=\\\"films-list__content\\\">\\r\\n            <h2 class=\\\"films-list__title\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":42},\"end\":{\"line\":7,\"column\":51}}}) : helper)))\n    + \"</h2>\\r\\n            <p class=\\\"films-list__genre\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"genre\") || (depth0 != null ? lookupProperty(depth0,\"genre\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"genre\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":41},\"end\":{\"line\":8,\"column\":50}}}) : helper)))\n    + \"| \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"releaseDate\") || (depth0 != null ? lookupProperty(depth0,\"releaseDate\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"releaseDate\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":52},\"end\":{\"line\":8,\"column\":67}}}) : helper)))\n    + \"</p>\\r\\n            <span class=\\\"films-list__rating\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"rating\") || (depth0 != null ? lookupProperty(depth0,\"rating\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"rating\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":45},\"end\":{\"line\":9,\"column\":55}}}) : helper)))\n    + \"</span>\\r\\n        </div>\\r\\n    </a>\\r\\n</li>\";\n},\"useData\":true});"],"sourceRoot":""}